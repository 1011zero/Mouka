@model Mouka.Web.Models.Alldata
@{
    Layout = null;
    ViewBag.Title = "UserProducts";
}

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <style>
        a {
            text-decoration: none;
        }
    </style>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Dashboard</title>
    <!-- Bootstrap stylesheet -->
    <link href="~/Content/bootstrap4/css/bootstrap.min.css" rel="stylesheet">
    <!-- font -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,900" rel="stylesheet">
    <!-- stylesheet -->
    <link href="~/Content/css/style.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/css/style_orange.css" title="style_orange" rel="alternate stylesheet" type="text/css" />
    <link href="~/Content/css/style_blue.css" title="style_blue" rel="alternate stylesheet" type="text/css" />
    <link href="~/Content/css/responsive.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/css/ele-style.css" rel="stylesheet" type="text/css" />
    <!-- font-awesome -->
    <link href="~/Content/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- line-awesome -->
    <link href="~/Content/line-awesome/css/line-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- crousel css -->
    <link href="~/Content/js/owl-carousel/owl.carousel.min.css" rel="stylesheet" type="text/css" />
    <!--bootstrap select-->
    <link href="~/Content/js/dist/css/bootstrap-select.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <!---->
    <div class="commontop">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-xs-12">
                    <div class="dashboard">
                        <div class="profile">
                            <div class="col-sm-3 col-xs-12">
                                <img id="categoryImage" src="@(string.IsNullOrEmpty(Model.UserURL) ? Url.Content("~/Content/images/dashboard/dp.png") : Model.UserURL)" alt="Image" height="140px" width="160px" style="border-radius: 50%" />
                            </div>
                            <div class="col-sm-9 col-xs-12 padd0">
                                <h4>@Model.UserName</h4>
                                <div class="common">
                                    <p class="des"><i class="la la-map-marker"></i> @Model.UserLocation</p>
                                    <p class="des1" id="createTime"> @Model.UserTime</p>
                                </div>
                                <ul class="list-inline" style="padding-left:0px">
                                    <li><a href="@Url.Action("AdminPage", "Admin")"><img src="~/Content/images/dashboard/grid.png" alt="image" title="image" /><p>Dashboard</p></a></li>
                                    <li>
                                        <a href="@Url.Action("ViewUsers", "Admin")">
                                            <img src="~/Content/images/dashboard/card.png" alt="image" title="image" />
                                            <p>View Users</p>
                                        </a>
                                    </li>

                                    <li><a href="@Url.Action("UserReport", "Admin")"><img src="~/Content/images/dashboard/message.png" alt="image" title="image" /><p>Messages</p></a></li>

                                </ul>
                            </div>
                        </div>
                        <div class="inner-search">
                            <div class="links">
                                <ul class="list-inline">
                                    <li><a href="#" onclick="confirmDeleteUser(@Model.UserId)">Delete User</a></li>
                                </ul>
                            </div>

                            <div class="row">
                                @foreach (var product in Model.Products)
                                {
                                    <div class="col-sm-6 col-xs-12">
                                        <div class="box">
                                            <div class="image" style="padding-top: 0px; width: 100px; height: 100px; border-radius: 50%;border:0px">
                                                <a href="@Url.Action("SingleProduct", "Product", new { product.ID })">
                                                    <img src="@product.ImageURL" alt="image" title="image" class="img-fluid" style="border-radius: 50%; width: 100px; height: 100px; ">
                                                </a>
                                            </div>
                                            <div class="pull-left">
                                                <h4>
                                                    Category: @{
                                                        if (product.CategoryId == 1)
                                                        {
                                                            @Html.Raw("Vehicle");
                                                        }
                                                        else if (product.CategoryId == 2)
                                                        {
                                                            @Html.Raw("Mobiles");
                                                        }
                                                        else if (product.CategoryId == 3)
                                                        {
                                                            @Html.Raw("Electronics");
                                                        }
                                                        else if (product.CategoryId == 4)
                                                        {
                                                            @Html.Raw("Real Estate");
                                                        }
                                                        else if (product.CategoryId == 5)
                                                        {
                                                            @Html.Raw("Fashion");
                                                        }
                                                        else if (product.CategoryId == 6)
                                                        {
                                                            @Html.Raw("Furniture");
                                                        }
                                                        else if (product.CategoryId == 7)
                                                        {
                                                            @Html.Raw("Jobs");
                                                        }
                                                        else if (product.CategoryId == 8)
                                                        {
                                                            @Html.Raw("Services");
                                                        }
                                                        else if (product.CategoryId == 9)
                                                        {
                                                            @Html.Raw("Pets");
                                                        }
                                                        else if (product.CategoryId == 10)
                                                        {
                                                            @Html.Raw("Education");
                                                        }
                                                        else if (product.CategoryId == 11)
                                                        {
                                                            @Html.Raw("Matrimony");
                                                        }
                                                        else if (product.CategoryId == 12)
                                                        {
                                                            @Html.Raw("Note and Coins");
                                                        }
                                                        else
                                                        {
                                                            @Html.Raw("Unknown");
                                                        }
                                                    }

                                                </h4>
                                                <i class="la la-angle-double-right">Name: @product.Name</i>
                                                <ul class="list-inline">
                                                    <li><i class="la la-map-marker"></i> @product.City</li>
                                                    <li><i class="la la-clock-o"></i> @product.postTime</li>
                                                </ul>
                                                <p><i class="la la-circle"></i> ৳‎@product.Price</p>
                                            </div>
                                            <div class="pull-right">
                                                
                                                <button type="button" onclick="deleteProduct(@product.ID)">Delete</button>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>



                            

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!---->
    
    <!-- jquery -->
    <script src="~/Content/js/jquery-3.2.1.min.js" type="text/javascript"></script>
    <!-- bootstrap js -->
    <script src="~/Content/js/popper.min.js" type="text/javascript"></script>
    <script src="~/Content/bootstrap4/js/bootstrap.min.js" type="text/javascript"></script>
    <!--bootstrap select-->
    <script src="~/Content/js/dist/js/bootstrap-select.js"></script>
    <!-- owlcarousel js -->
    <script src="~/Content/js/holder.min.js" type="text/javascript"></script>
    <script src="~/Content/js/owl-carousel/owl.carousel.min.js" type="text/javascript"></script>
    <!--internal js-->
    <script src="~/Content/js/owlinternal.js"></script>
    <script src="~/Content/js/internal.js"></script>
    <script src="~/Content/js/preetycheble/prettyCheckable.min.js"></script>
    <link rel="~/Content/stylesheet" href="js/preetycheble/prettyCheckable.css" />

    <script>

        // Get the element with id "createTime"
        var createTimeElement = document.getElementById("createTime");

        // Get the create time value
        var createTime = createTimeElement.textContent;

        // Parse the create time string to a Date object
        var createDate = new Date(createTime);

        // Get the current time
        var currentTime = new Date();

        // Calculate the time difference in milliseconds
        var timeDiff = currentTime - createDate;

        // Convert the time difference to seconds, minutes, hours, and days
        var seconds = Math.floor(timeDiff / 1000);
        var minutes = Math.floor(seconds / 60);
        var hours = Math.floor(minutes / 60);
        var days = Math.floor(hours / 24);

        // Format the time difference string
        var timeDiffString = days + " days, " + hours % 24 + " hours, " + minutes % 60 + " minutes";

        // Update the create time element with the calculated time difference
        createTimeElement.textContent = "Create Account: " + timeDiffString + " ago";

        function confirmDeleteUser(event) {


            var confirmation = confirm("you want to delete this user?");
            if (confirmation) {
                // Call the Delete User controller or perform the desired action
                $.ajax({
                     url: '@Url.Action("Delete", "User")',
                     type: 'POST',
                    data: { id: event },
                      success: function (result) {
                     // Handle the success response
                     // Refresh the page or perform any other necessary actions
                          alert("User deleted successfully!");
                          window.location.href = "/Admin/AdminPage";
                          

                     },
                      error: function (xhr, status, error) {
                      // Handle the error response
                      console.error(error);
                      }
                });
            }
        }

        function deleteProduct(productId) {
        // Show confirmation alert
        var confirmed = confirm("Are you sure you want to delete this product?");

        // Check user's response
        if (confirmed) {
            // Send the product ID to the controller using AJAX
            $.ajax({
                url: '@Url.Action("Delete", "Product")',
                type: 'POST',
                data: { id: productId },
                success: function (result) {
                    // Handle the success response
                    // Refresh the page or perform any other necessary actions
                    location.reload();
                },
                error: function (xhr, status, error) {
                    // Handle the error response
                    console.error(error);
                }
            });
        }
    }
    </script>
    
</body>
</html>

